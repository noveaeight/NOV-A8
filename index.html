<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<title>3D Sneaker Practice Store</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<style>
html,body{margin:0;overflow:hidden;background:#0f0f0f;font-family:Arial}
#hint{position:fixed;top:20px;left:50%;transform:translateX(-50%);color:#888;font-size:13px}
#ui{position:fixed;bottom:20px;left:50%;transform:translateX(-50%);background:#000c;color:#fff;padding:12px 20px;border-radius:999px;display:flex;gap:12px;align-items:center}
#buy,#color{border:none;border-radius:20px;padding:8px 16px;cursor:pointer}
#buy{background:#fff;color:#000}
#color{background:#333;color:#fff}
#info{position:fixed;top:60px;left:50%;transform:translateX(-50%);color:#666;font-size:14px}
</style>
</head>
<body>

<div id="hint">W A S D ì´ë™ Â· ë§ˆìš°ìŠ¤ ì‹œì  Â· í´ë¦­ í™•ëŒ€ Â· ESC ì´ˆê¸°í™”</div>
<div id="info">NIKE ëœì¥í¬ìŠ¤ ê°ì„± Â· 3D ì—°ìŠµìš©</div>
<div id="ui">
  <span id="cart">ğŸ›’ CART 0</span>
  <button id="buy">ADD</button>
  <button id="color">COLOR</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/examples/js/loaders/GLTFLoader.js"></script>
<script>
/* ===== ê¸°ë³¸ ===== */
const scene=new THREE.Scene();scene.background=new THREE.Color(0x0f0f0f);
const camera=new THREE.PerspectiveCamera(70,innerWidth/innerHeight,0.1,1000);
camera.position.set(0,1.6,6);
const renderer=new THREE.WebGLRenderer({antialias:true});renderer.setSize(innerWidth,innerHeight);renderer.shadowMap.enabled=true;document.body.appendChild(renderer.domElement);

/* ===== ì¡°ëª… ===== */
scene.add(new THREE.AmbientLight(0xffffff,0.5));
const spot=new THREE.SpotLight(0xffffff,1.2);spot.position.set(2,6,3);spot.castShadow=true;scene.add(spot);

/* ===== ê³µê°„ ===== */
const floor=new THREE.Mesh(new THREE.PlaneGeometry(50,50),new THREE.MeshStandardMaterial({color:0x1a1a1a}));floor.rotation.x=-Math.PI/2;floor.receiveShadow=true;scene.add(floor);
const wall=new THREE.Mesh(new THREE.PlaneGeometry(50,10),new THREE.MeshStandardMaterial({color:0x121212}));wall.position.set(0,5,-10);scene.add(wall);

/* ===== ì‹ ë°œ (GLB ë¡œë“œ ë°©ì‹) ===== */
const shoeGroup = new THREE.Group();
scene.add(shoeGroup);

const loader = new THREE.GLTFLoader();
// â¬‡ï¸ ì—¬ê¸°ì— "í•©ë²•ì ìœ¼ë¡œ ì†Œìœ í•œ" ì‹ ë°œ GLB íŒŒì¼ ê²½ë¡œë¥¼ ë„£ì–´
loader.load(
  'shoe.glb',
  (gltf)=>{
    const model = gltf.scene;
    model.traverse(o=>{ if(o.isMesh){ o.castShadow=true; o.receiveShadow=true; }});
    model.scale.set(1.2,1.2,1.2);
    model.position.set(0,0,-2);
    shoeGroup.add(model);
  },
  undefined,
  (err)=>{ console.error('GLB ë¡œë“œ ì‹¤íŒ¨', err); }
);

/* ===== ì´ë™ ===== */
const keys={};addEventListener('keydown',e=>{keys[e.key.toLowerCase()]=true;if(e.key==='Escape')shoeGroup.scale.set(0.9,0.9,0.9);});addEventListener('keyup',e=>keys[e.key.toLowerCase()]=false);
let yaw=0,pitch=0;addEventListener('mousemove',e=>{yaw-=e.movementX*0.002;pitch-=e.movementY*0.002;pitch=Math.max(-1.2,Math.min(1.2,pitch));shoeGroup.rotation.y=(e.clientX/innerWidth-0.5)*2;});
function moveCamera(){camera.rotation.set(pitch,yaw,0);const dir=new THREE.Vector3();camera.getWorldDirection(dir);dir.y=0;dir.normalize();const right=new THREE.Vector3().crossVectors(camera.up,dir).normalize();if(keys['w'])camera.position.addScaledVector(dir,0.08);if(keys['s'])camera.position.addScaledVector(dir,-0.08);if(keys['a'])camera.position.addScaledVector(right,0.08);if(keys['d'])camera.position.addScaledVector(right,-0.08);shoeGroup.lookAt(camera.position.x,1.6,camera.position.z);} 

/* ===== í´ë¦­ ===== */
const raycaster=new THREE.Raycaster();const mouse=new THREE.Vector2();addEventListener('click',e=>{mouse.x=e.clientX/innerWidth*2-1;mouse.y=-(e.clientY/innerHeight)*2+1;raycaster.setFromCamera(mouse,camera);const hit=raycaster.intersectObject(shoeGroup,true);if(hit.length)shoeGroup.scale.set(1.2,1.2,1.2);});

/* ===== UI ===== */
let cart=0;document.getElementById('buy').onclick=()=>{cart++;document.getElementById('cart').innerText=`ğŸ›’ CART ${cart}`;};
let toggle=false;document.getElementById('color').onclick=()=>{
  toggle=!toggle;
  shoeGroup.traverse(o=>{
    if(o.isMesh && o.material && o.material.color){
      o.material.color.set(toggle?0xbfa97a:0xd8c7a3);
    }
  });
};upper.material.color.set(toggle?0xbfa97a:0xd8c7a3);};

/* ===== ë°˜ì‘í˜• ===== */
addEventListener('resize',()=>{camera.aspect=innerWidth/innerHeight;camera.updateProjectionMatrix();renderer.setSize(innerWidth,innerHeight);});

/* ===== ë£¨í”„ ===== */
(function animate(){requestAnimationFrame(animate);shoeGroup.rotation.y+=0.01;moveCamera();renderer.render(scene,camera);})();
</script>
</body>
</html>


